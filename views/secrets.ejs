<%- include('partials/header') %>

<div class="hero text-white text-center d-flex align-items-center justify-content-center">
  <div class="container">
    <h1 class="display-4">Welcome to Secrets, <%= userEmail %>!</h1>
    <p class="lead">Share your secrets anonymously and safely.</p>
  </div>
</div>

<div class="info-section py-5 text-center text-dark">
  <div class="container">
    <h2 class="mb-4">Why Use Secrets?</h2>
    <p>Because everyone has something they need to say... without judgment.</p>
  </div>
</div>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <form action="/secrets" method="POST" class="mb-4">
        <div class="form-group">
          <textarea name="secret" class="form-control" rows="4" placeholder="Write your secret..." required></textarea>
        </div>
        <button type="submit" class="btn btn-warning btn-block mt-2">Submit Secret</button>
      </form>

      <h3 class="text-light">Your Secrets</h3> <% // Changed title from "Shared Secrets" to "Your Secrets" %>
      <ul class="list-group mt-3">
        <% if (userSecrets && userSecrets.length > 0) { %> <% // Check if userSecrets exist and have content %>
          <% userSecrets.forEach(secret => { %> <% // Iterate directly over userSecrets %>
            <li class="list-group-item bg-dark text-light mb-2 rounded">
              <%= secret %>
            </li>
          <% }) %>
        <% } else { %>
          <li class="list-group-item bg-dark text-light mb-2 rounded">
            You haven't posted any secrets yet. Share one above!
          </li>
        <% } %>
      </ul>

      <div class="text-center mt-4">
        <a href="/logout" class="btn btn-outline-dark">Logout</a>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
